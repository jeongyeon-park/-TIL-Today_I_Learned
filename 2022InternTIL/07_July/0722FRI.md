# 0722 FRI ğŸ¿

## useStateë¡œ LifeCycle ì œì–´í•˜ê¸°

### mount ë ë•Œ, update ë  ë•Œ

```javascript
import React, { useEffect, useState } from "react";

const Lifecycle = () => {
  const [count, setCount] = useState(0);
  const [text, setText] = useState("");

  useEffect(() => {
    console.log("Mount!");
  }, []);

  //ì»´í¬ë„ŒíŠ¸ê°€ ì—…ë°ì´íŠ¸ ë˜ëŠ” ìˆœê°„
  useEffect(() => {
    console.log("Update!");
  });
  // countê°€ ë³€í•˜ëŠ” ìˆœê°„ í˜¸ì¶œ , ê°ì§€í•˜ê³  ì‹¶ì€ ê°’ë§Œ ê°ì§€ í•  ìˆ˜ ìˆë‹¤.
  useEffect(() => {
    console.log(`count is UPdate: ${count}`);
    if (count > 5) {
      alert("countê°€ 5ë¥¼ ë„˜ì—ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ 1ë¡œ ì´ˆê¸°í™” í•©ë‹ˆë‹¤");
      setCount(1);
    }
  }, [count]);

  useEffect(() => {
    console.log(`text is update: ${text}`);
  }, [text]);

  return (
    <div style={{ padding: 20 }}>
      <div>
        {count}
        <button onClick={() => setCount(count + 1)}>+</button>
        <button onClick={() => setCount(count - 1)}>-</button>
      </div>
      <div>
        <input value={text} onChange={(e) => setText(e.target.value)} />
      </div>
    </div>
  );
};

export default Lifecycle;
```

### unmount ë  ë•Œ

### useEffect ë¡œ ê°ì²´ê°€ ì‚¬ë¼ì§ˆë•Œ ì´ë²¤íŠ¸ ì œì–´

```javascript
import React, { useEffect, useState } from "react";

const UnmountTest = () => {
  useEffect(() => {
    console.log("Mount");

    return () => {
      // unmount ì‹œì ì— ì‹¤í–‰ë˜ê²Œ ë¨
      console.log("Unmount!");
    };
  }, []);
  return <div>Unmount Testing Component</div>;
};

const Lifecycle = () => {
  const [isVisible, setVisible] = useState(false);
  const toggle = () => {
    setVisible(!isVisible);
  };

  return (
    <div style={{ padding: 20 }}>
      <button onClick={toggle}>ON/OFF</button>
      {isVisible && <UnmountTest />}
    </div>
  );
};

export default Lifecycle;
```

## API í˜¸ì¶œí•˜ê¸°

useEffect ë¥¼ ì´ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ Mount ì‹œì ì— APIë¥¼ í˜¸ì¶œí•˜ê³  í•´ë‹¹ API ì˜ ê²°ê³¼ê°’ì„ ì¼ê¸° ë°ì´í„° ì´ˆê¸°ê°’ìœ¼ë¡œ ì´ìš©í•˜ê¸°

useEffect ë¥¼ ì´ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ Mount ì‹œì ì— API ë¥¼ í˜¸ì¶œí•˜ê³  í•´ë‹¹ API ê²°ê³¼ê°’ì„ ì¼ê¸° ë°ì´í„°ì˜ ì´ˆê¸°ê°’ìœ¼ë¡œ ì´ìš©í•˜ê¸°

## React Developer Tools

## Memoization : useMemo ì‚¬ìš©í•˜ê¸°

ì´ë¯¸ ê³„ì‚° í•´ ë³¸ ê²°ê³¼ë¥¼ ê¸°ì–µ í•´ ë‘ì—ˆë‹¤ê°€
ë‹¤ì‹œ ê³„ì‚°í•˜ì§€ ì•Šê³  ê°’ë§Œ ë°˜í™˜í•˜ëŠ” ë°©ë²•

useMemo ëŠ” ì½œë°±í•¨ìˆ˜ê°€ return í•˜ëŠ” ê°’ì„ ìµœì í™” í•˜ë„ë¡ ë„ì™€ì¤€ë‹¤.

```javascript
const getDiaryAnalysis = useMemo(() => {
  console.log("ì¼ê¸° ë¶„ì„ ì‹œì‘");

  const goodCount = data.filter((it) => it.emotion >= 3).length;
  const badCount = data.length - goodCount;
  const goodRatio = Math.floor((goodCount / data.length) * 100);
  return { goodCount, badCount, goodRatio };
}, [data.length]);

const { goodCount, badCount, goodRatio } = getDiaryAnalysis();
```

ì´ë ‡ê²Œ í•´ ì£¼ë©´ [data.length] ê°€ ë³€í™” ìˆì„ ë•Œë§Œ ì½œë°±í•¨ìˆ˜ê°€ ë‹¤ì‹œ ìˆ˜í–‰ëœë‹¤.

ì´ëŸ¬ë©´ ì—ëŸ¬ê°€ ë‚˜ëŠ”ë° ... ì™œ???????

ê·¼ë° ì´ë ‡ê²Œ ìµœì í™” í•´ ì£¼ë©´ useMemoëŠ” ë”ì´ìƒ í•¨ìˆ˜ê°€ ì•„ë‹ˆê³  ê·¸ëƒ¥ ê°’ì´ë‹¤.

```javascript
const getDiaryAnalysis = useMemo(() => {
  console.log("ì¼ê¸° ë¶„ì„ ì‹œì‘");

  const goodCount = data.filter((it) => it.emotion >= 3).length;
  const badCount = data.length - goodCount;
  const goodRatio = Math.floor((goodCount / data.length) * 100);
  return { goodCount, badCount, goodRatio };
}, [data.length]);

const { goodCount, badCount, goodRatio } = getDiaryAnalysis;
```

ì–´ë–¤ê°’ì´ ë³€í™”í•  ë•Œë§Œ ì´ ê°’ì´ ë°”ë€”ê±´ì§€ ëª…ì‹œ í•´ì£¼ë©´ ~ ì•„ì£¼ êµ¿ ~

## ìµœì í™” 2 - ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš© : React.memo

ë¦¬ì•¡íŠ¸ì—ì„œ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë” ë˜ë©´ ìì‹ ì»´í¬ë„ŒíŠ¸ë“¤ë„ ë¦¬ë Œë” ëœë‹¤.

êµ³ì´ ì•ˆ ë³€í•œ ìì‹ê¹Œì§€ ë¦¬ë Œë” ì•ˆ ë¼ë„ ë˜ì§€ ì•Šì„ê¹Œìš”?

### React.memo : í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ê²Œ ì—…ë°ì´íŠ¸ ì¡°ê±´ì„ ê±¸ì

```javascript
const MyComponent = React.memo(function MyComponent(props) {
  /* propsë¥¼ ì‚¬ìš©í•˜ì—¬ ë Œë”ë§ */
});
```

propsê°€ ë³€í•˜ì§€ ì•Šìœ¼ë©´ ë¦¬ë Œë”ë§ í•˜ì§€ ì•ŠëŠ” ê°•í™”ëœ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•œë‹¤.

ë¶€ëª¨ì»´í† ë„ŒíŠ¸ì˜ ë³€í™”ê°€ ìˆì„ ë•Œ ë¦¬ë Œë”ë§ì´ ì•ˆ ë˜ëŠ”ê±°ì§€ ìê¸°ìì‹ ì˜ stateê°€ ë³€í•˜ë©´ ê·¸ê±´ ë Œë”ë§ ëœë‹¤.

```javascript
const TextView = React.memo(({ text }) => {
  useEffect(() => {
    console.log(`update :: Text :: ${text}`);
  });
  return <div>{text}</div>;
});

const CountView = React.memo(({ count }) => {
  useEffect(() => {
    console.log(`update :: Count :: ${count}`);
  });
  return <div>{count}</div>;
});
```

jsì—ì„œëŠ” ê°ì²´ë¥¼ ì–•ì€ ë¹„êµí•¨

ê°ì²´ëŠ” ê°’ì„ ì´ìš©í•œ ë¹„êµê°€ ì•„ë‹Œ ì£¼ì†Œë¥¼ ì´ìš©í•œ ì–•ì€ ë¹„êµë¥¼ í•œë‹¤.

ê°ì²´ë“¤ì€ ìƒì‡µë˜ìë§ˆì ê³ ìœ í•œ ë©”ëª¨ë¦¬ ì£¼ì†Œ ê°€ì§„ë‹¤.

## ì»´í¬ë„ŒíŠ¸ ìµœì í™” í•˜ì

? ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ê°€ ìµœì í™”ì˜ ëŒ€ìƒ?

React Developer Toolsì˜ ê¸°ëŠ¥ì„ ì´ìš©í•´ë³´ì

setData ì— ë§¤ê°œë³€ìˆ˜ë¥¼ í•¨ìˆ˜ë¡œ ì „ë‹¬í•´ë„ ëœë‹¤.

setStateì— í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì„ í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸ë¼ê³  í‘œí˜„í•œë‹¤.

```javascript
setData((data) => [newItem, ...data]);
```

ì´ë ‡ê²Œ í•˜ë©´ í•­ìƒ ìµœì‹ ì˜ stateë¥¼ ì¸ìë¥¼ í†µí•´ ì°¸ì¡°í•  ìˆ˜ ìˆê²Œ ë˜ë©´ì„œ

## ìµœì í™” ë³µìŠµ

ìµœì í™”ì˜ ì‹œì‘ì€ react.memoë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¬¶ì–´ì£¼ëŠ” ê²ƒ

## ìƒíƒœ ë³€í™” ë¡œì§ ë¶„ë¦¬í•˜ê¸° : useReducer

state ê°€ ë³µì¡í•˜ê³  ê°ì²´ë¼ ìƒíƒœ ë³€í™” ë¡œì§ì´ ì•„ì£¼ ë§ì„ ìˆ˜ ìˆë‹¤.

action ê°ì²´ = action ì€ ê³§ ìƒíƒœ ë³€í™”.
ìƒíƒœ ë³€í™” ê°ì²´
