# 0729 FRIğŸŸ

## simple diary ê¸°ë³¸ ê¸°ëŠ¥ ë³µìŠµ ë‚´ìš© ë³µê¸°ë¥¼..

### ADD

Diary List ì— ìƒˆë¡œìš´ ì¼ê¸° add í•˜ë ¤ë©´ setData ë„£ì€ í•¨ìˆ˜ë¥¼ app.js ì— ë„£ì–´ì„œ diaryEditorì—ê²Œ ì¤€ë‹¤.

diaryEditor ì—

### DELETE

onDelete í•˜ëŠ” í•¨ìˆ˜ë¥¼ DiaryList -> DiaryItem ì— ì¤€ë‹¤.
ê·¸ í•¨ìˆ˜ëŠ” App.js ì—ì„œ ë§Œë“ ë‹¤.

array.filter() í•´ì„œ ì•„ì´ë””ê°€ ì œê±°í•˜ë ¤ëŠ” DiaryItem ì˜ IDë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ìš”ì†Œë“¤ì„ ë°°ì—´ì— ë‹¤ ë‹´ëŠ”ë‹¤.

ê·¸ê±¸ App.jsì—ì„œ setData í•œë‹¤.

### EDIT

onEdit í•˜ëŠ” í•¨ìˆ˜ë¥¼ DiaryList -> DiaryItemì— ì¤€ë‹¤.
onEdit ì€ App.jsì—ì„œ ë§Œë“¤ê³ 
array.map ì¨ì„œ DiaryItem ì˜ idë¡œ ìˆ˜ì •í•˜ë ¤ëŠ” itemì„ ì°¾ì•„ ê·¸ ì•„ì´í…œì˜ contentë§Œì„ ìˆ˜ì •í•œ ìƒˆ dataStateë¥¼ ë§Œë“ ë‹¤.

### ë¦¬ìŠ¤íŠ¸ ë Œë”ë§

ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ì€ array.mapì„ ì‚¬ìš©í•œë‹¤.

### useRef

useRefëŠ” DOM ìš”ì†Œì— ì ‘ê·¼ í•˜ì—¬ DOM ìš”ì†Œë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ì“°ê¸°ë„ í•˜ì§€ë§Œ

```javascript
const element = useRef();

useEffect(()=>{
    console.log(element);
})

return (
    <div>
        <h1 ref={element}>ë­”ê°€ë¥¼ ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤..!</h1>
    <div>
);
```

ì´ë ‡ê²Œ í•˜ë©´ elementì— h1 DOM ê°ì²´ Objectê°€ ë“¤ì–´ê°€ê²Œ ëœë‹¤.

element.current ë¡œ DOM ìš”ì†Œì— ì ‘ê·¼ í•  ìˆ˜ ìˆë‹¤.

ê·¸ëŸ°ë° ë‹¤ë¥¸ ë°©ë²•ë„ ìˆë‹¤.

```javascript
const dataId = useRef(1);

arrary.map((it) => {
  return {
    id: (dataId.current += 1),
    name: it.name,
    content: it.content,
  };
});
```

ì´ë ‡ê²Œ í•˜ë©´ íŠ¹ì • ë³€ìˆ˜ë„ ì‚¬ìš© í•´ ì¤„ ìˆ˜ ìˆìŒ

# simple diary ë§Œë“¤ê¸° ë³µìŠµ.. useEffect ì™€ useMemo, useCallback, useReducer, Context

## React ìƒëª…ì£¼ê¸°

- Mount : í™”ë©´ì— ë‚˜íƒ€ë‚˜ëŠ” ê²ƒ / ì´ˆê¸°í™” ì‘ì—…
- Update : ì—…ë°ì´íŠ¸(ë¦¬ë Œë”) / ì˜ˆì™¸ ì²˜ë¦¬ ì‘ì—…
- UnMount : í™”ë©´ì—ì„œ ì‚¬ë¼ì§ / ë©”ëª¨ë¦¬ ì •ë¦¬ ì‘ì—…

React ëŠ” Life cycleë§ˆë‹¤ ì‹¤í–‰ í•  ìˆ˜ ìˆëŠ” ë©”ì†Œë“œê°€ ìˆë‹¤.

ê·¼ë° ì´ëŸ° ë©”ì†Œë“œëŠ” í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ì“¸ ìˆ˜ ìˆë‹¤.

ìš°ë¦¬ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ í•¨ìˆ˜í˜•íƒœë¡œ ë§Œë“¤ì–´ì™”ë‹¤.

í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ë„ ê·¼ë³¸ì ìœ¼ë¡œëŠ” ìƒíƒœ ê´€ë¦¬í•˜ëŠ” stateë„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

use í‚¤ì›Œë“œë¥¼ ì•ì— ë¶™ì—¬ì„œ classí˜•ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ê°€ì ¸ì™€ì„œ ì‚¬ìš©í•œë‹¤.

ê·¸ë˜ì„œ Hook ì´ë¼ê³  ë¶€ë¦„ìš”

Hooksê°€ ì—„ì²­ ë§ì´ ì¡´ì¬í•˜ëŠ”ë° í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ëŠ” ì½”ë“œê°€ ê¸¸ê³  ì¤‘ë³µì½”ë“œ ë§ì´ ì¨ì•¼í•˜ëŠ” ë‹¨ì ë•Œë¬¸ì— .. í´ë˜ìŠ¤í˜• ë°°ì œí•˜ê³  í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ë ¤ê³  í•˜ëŠ” ì¶”ì„¸ë‹¤.

```javascript
useEffect(() => {
  // todo...
}, []);
```

ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” Deps : ì˜ì¡´ì„± ë°°ì—´.

Depsì— ìˆëŠ” ê°’ì¤‘ í•˜ë‚˜ë¼ë„ ë³€í™˜í•˜ë©´ ì½œë°± í•¨ìˆ˜ê°€ ìˆ˜í–‰ëœë‹¤.

ì‹¤ìŠµ ì½”ë“œëŠ” [ì—¬ê¸°](./Lifecycle.js)ì—

## useMemo

ìš°ë¦¬ê°€ memoization í•˜ê³ ì‹¶ì€ í•¨ìˆ˜ë¥¼ ê°ì‹¸ì£¼ë©´ ëœë‹¤.

ì²«ë²ˆì§¸ ì¸ìë¡œ ì½œë°±í•¨ìˆ˜ë¥¼ ë°›ì•„ì„œ ê·¸ ì½œë°±í•¨ìˆ˜ê°€ return í•˜ëŠ” ê°’ì„ ìµœì í™” í•  ìˆ˜ ìˆê²Œ í•´ ì¤€ë‹¤.

```javascript
const getDiaryAnalysis = useMemo(() => {
  console.log("ì¼ê¸° ë¶„ì„ ì‹œì‘");

  const goodCount = data.filter((it) => it.emotion >= 3).length;
  const badCount = data.length - goodCount;
  const goodRatio = (goodCount / data.length) * 100;

  return { goodCount, badCount, goodRatio };
}, [data.length]);
```

data.length ê°€ ë³€ê²½ ë  ë•Œì—ë§Œ ì½œë°±í•¨ìˆ˜ê°€ ë‹¤ì‹œ ìˆ˜í–‰ëœë‹¤.

getDiaryAnalysis ëŠ” ë” ì´ìƒ í•¨ìˆ˜ê°€ ì•„ë‹ˆê²Œ ëœë‹¤. useMemoë¡œ ë¶€í„° ê°’ì„ ì „ë‹¬ë°›ê²Œ ëœë‹¤.

```javascript
  const { goodCount, badCount, goodRatio } = getDiaryAnalysis();

  ê·¸ë˜ì„œ ì´ë ‡ê²Œ í•¨ìˆ˜ê°€ ì•„ë‹ˆë¼

    const { goodCount, badCount, goodRatio } = getDiaryAnalysis;

ê°’ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
```

## React.memo

ë¶€ëª¨ê°€ ë¦¬ë Œë” ë˜ë©´ ìì‹ë„ ë¦¬ë Œë” ëœë‹¤.

ìì‹ ì´ ë°›ëŠ” propì´ ë³€í•  ë•Œì—ë§Œ updateí•˜ê²Œ í•˜ëŠ” ì¡°ê±´ì„ ê±¸ì–´ì„œ ìì‹ì´ ë¶ˆí•„ìš”í•˜ê²Œ ë¦¬ë Œë” ë˜ëŠ” ê²ƒì„ ë§‰ì•„ë³´ì.

React.memo : í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ê²Œ ì—…ë°ì´íŠ¸ ì¡°ê±´ì„ ê±¸ì.

## ìƒíƒœ ë³€í™” ë¡œì§ ë¶„ë¦¬í•˜ê¸°

ê°ì²´ì—ëŠ” íƒ€ì…ì´ ë“¤ì–´ìˆì–´ìš” : Action ê°ì²´ (ê³§ ìƒíƒœë³€í™”)

ìƒíƒœ ë³€í™”ë¥¼ ì„¤ëª… í•  ê°ì²´

ì•¡ì…˜ ê°ì²´ëŠ” reducerë¡œ ë‚ ì•„ê°‘ë‹ˆë‹¤ .

reducerëŠ” í˜„ì¬ stateë‘ action ê°ì²´ë¥¼ ì „ë‹¬ ë°›ëŠ”ë‹¤.

ë°˜í™˜í•˜ëŠ” ë­”ê°€ëŠ” ìƒˆ stateê°€ ëœë‹¤.

![image](https://user-images.githubusercontent.com/64348346/181825060-decac695-f18a-4ad2-8e82-e89c24d7678f.png)

## ì»´í¬ë„ŒíŠ¸ ìµœì í™”

React Developer tools ë¡œ ìµœì í™” í•  ì»´í¬ë„ŒíŠ¸ ê³ ë¥´ê¸°

ì»´í¬ë„ŒíŠ¸ ìµœì í™” ì´ìœ  =

## useCallback

ë©”ëª¨ì´ì œì´ì…˜ ëœ ì½œë°±ì„ ë°˜í™˜í•œë‹¤.

useCallbackì€ ë©”ëª¨ì´ì œì´ì…˜ ëœ ì½œë°±í•¨ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤.

ë‘ë²ˆì§¸ ì¸ìë¡œ ì „ë‹¬í•œ ë””íœë˜ì‹œ ì–´ë ˆì´ ì•ˆì˜ ê°’ì´ ë³€í™”í•˜ì§€ ì•Šìœ¼ë©´

ì²«ë²ˆì§¸ ì¸ìë¡œ ë„˜ê¸´ ì½œë°±í•¨ìˆ˜ë¥¼ ê³„ì† ì¬ì‚¬ìš© í•  ìˆ˜ ìˆê²Œ í•´ ì¤€ë‹¤.

í•¨ìˆ˜ê°€ ë‹¤ì‹œ ì¬ìƒì„± ë˜ì§€ ì•Šê²Œ í•˜ê³ ì‹¶ì–´

onCreate, onDelete ê°™ì€ ë§Œë“  í•¨ìˆ˜ë“¤ì„ useCallbackìœ¼ë¡œ ê°ì‹¸ì¤€ë‹¤.

```javascript
const onCreate = useCallback((author, content, emotion) => {
  const created_date = new Date().getTime();
  const newItem = {
    author,
    content,
    emotion,
    created_date,
    id: dataId.current,
  };
  dataId.current += 1;

  dispatch({ type: "CREATE", data: newItem });
  //setData([newItem, ...data]);
}, []);
```

ì´ë ‡ê²Œ í•˜ë©´
mount ë˜ê³  ë‚˜ì„œëŠ” ê³„ì† í•¨ìˆ˜ë¥¼ ì¬ìƒì„± í•˜ì§€ ì•Šê³  ìƒì„± ë˜ì—ˆë˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤.

dependency array ë¥¼ ì´ìš©í•´ì„œ ì½œë°± í•¨ìˆ˜ë¥¼ ì¬ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤.
